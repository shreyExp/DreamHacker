<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DreamHacker: main/main.cpp File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DreamHacker
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('main_8cpp.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">Data Structures</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.cpp File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;stdio.h&gt;</code><br />
<code>#include &lt;stdlib.h&gt;</code><br />
<code>#include &lt;string.h&gt;</code><br />
<code>#include &lt;fcntl.h&gt;</code><br />
<code>#include &lt;sys/stat.h&gt;</code><br />
<code>#include &lt;sys/types.h&gt;</code><br />
<code>#include &lt;unistd.h&gt;</code><br />
<code>#include &lt;stdarg.h&gt;</code><br />
<code>#include &lt;signal.h&gt;</code><br />
<code>#include &lt;time.h&gt;</code><br />
<code>#include &lt;wiringPi.h&gt;</code><br />
<code>#include &lt;mcp3004.h&gt;</code><br />
<code>#include &lt;QApplication&gt;</code><br />
<code>#include &quot;<a class="el" href="mainwindow_8h_source.html">../include/mainwindow.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="_cpp_timer_8h_source.html">../include/CppTimer.h</a>&quot;</code><br />
<code>#include &lt;thread&gt;</code><br />
<code>#include &quot;<a class="el" href="_pulse_sensor_8h_source.html">../include/PulseSensor.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="json__fastcgi__web__api_8h_source.html">../include/json_fastcgi_web_api.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for main.cpp:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp__incl.png" border="0" usemap="#amain_2main_8cpp" alt=""/></div>
<map name="amain_2main_8cpp" id="amain_2main_8cpp">
<area shape="rect" title=" " alt="" coords="1352,5,1459,32"/>
<area shape="rect" title=" " alt="" coords="498,244,559,271"/>
<area shape="rect" title=" " alt="" coords="583,244,647,271"/>
<area shape="rect" title=" " alt="" coords="1469,87,1534,114"/>
<area shape="rect" title=" " alt="" coords="1559,87,1618,114"/>
<area shape="rect" title=" " alt="" coords="43,169,123,196"/>
<area shape="rect" title=" " alt="" coords="1642,87,1732,114"/>
<area shape="rect" title=" " alt="" coords="1185,244,1253,271"/>
<area shape="rect" title=" " alt="" coords="1756,87,1826,114"/>
<area shape="rect" title=" " alt="" coords="1294,244,1360,271"/>
<area shape="rect" title=" " alt="" coords="1392,244,1451,271"/>
<area shape="rect" title=" " alt="" coords="1850,87,1929,114"/>
<area shape="rect" title=" " alt="" coords="1953,87,2040,114"/>
<area shape="rect" title=" " alt="" coords="1772,169,1868,196"/>
<area shape="rect" href="mainwindow_8h.html" title=" " alt="" coords="2312,87,2472,114"/>
<area shape="rect" href="_cpp_timer_8h.html" title=" " alt="" coords="1146,169,1292,196"/>
<area shape="rect" title=" " alt="" coords="147,169,206,196"/>
<area shape="rect" href="_pulse_sensor_8h.html" title=" " alt="" coords="1130,87,1292,114"/>
<area shape="rect" href="json__fastcgi__web__api_8h.html" title=" " alt="" coords="555,80,704,121"/>
<area shape="rect" title=" " alt="" coords="1892,169,1999,196"/>
<area shape="rect" title=" " alt="" coords="2023,169,2122,196"/>
<area shape="rect" title=" " alt="" coords="2146,169,2250,196"/>
<area shape="rect" title=" " alt="" coords="2274,169,2393,196"/>
<area shape="rect" title=" " alt="" coords="2418,169,2487,196"/>
<area shape="rect" title=" " alt="" coords="2512,169,2574,196"/>
<area shape="rect" title=" " alt="" coords="2598,169,2682,196"/>
<area shape="rect" title=" " alt="" coords="2707,169,2798,196"/>
<area shape="rect" title=" " alt="" coords="2822,169,2925,196"/>
<area shape="rect" title=" " alt="" coords="2949,169,3022,196"/>
<area shape="rect" title=" " alt="" coords="940,169,1005,196"/>
<area shape="rect" title=" " alt="" coords="1029,169,1121,196"/>
<area shape="rect" title=" " alt="" coords="230,169,328,196"/>
<area shape="rect" title=" " alt="" coords="352,169,424,196"/>
<area shape="rect" title=" " alt="" coords="448,169,510,196"/>
<area shape="rect" title=" " alt="" coords="636,169,690,196"/>
<area shape="rect" title=" " alt="" coords="714,169,761,196"/>
<area shape="rect" title=" " alt="" coords="785,169,864,196"/>
</map>
</div>
</div>
<p><a href="main_8cpp_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="nested-classes"></a>
Data Structures</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_s_e_n_s_o_rfastcgicallback.html">SENSORfastcgicallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">class &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="class_j_s_o_n_c_g_i_a_d_c_callback.html">JSONCGIADCCallback</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a8ee3282bc313e547dbbb8d4f4010db61"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a8ee3282bc313e547dbbb8d4f4010db61">signalHandler</a> (int signum)</td></tr>
<tr class="separator:a8ee3282bc313e547dbbb8d4f4010db61"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8605e2b78cd4a81b6c6b5c30cb7366a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a> (void)</td></tr>
<tr class="separator:ae8605e2b78cd4a81b6c6b5c30cb7366a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0ddf1224851353fc92bfbff6f499fa97"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a> (int argc, char *argv[])</td></tr>
<tr class="separator:a0ddf1224851353fc92bfbff6f499fa97"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a037aed45f792fc3e78387006be43a53e"><td class="memItemLeft" align="right" valign="top">volatile int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="main_8cpp.html#a037aed45f792fc3e78387006be43a53e">g_running</a> = 1</td></tr>
<tr class="separator:a037aed45f792fc3e78387006be43a53e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a0ddf1224851353fc92bfbff6f499fa97"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0ddf1224851353fc92bfbff6f499fa97">&#9670;&nbsp;</a></span>main()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>argc</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>argv</em>[]&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Threshold of Beats per minute Modifiable by using ./main -t &lt;int&gt;</p>
<p>bool value: if 1, then ecg will be plotted, if zero ecg will not be plotted Can be changed by giving arguments like this: ./main -g 0 for graph not to be plotted and ./main -g 1 for graph to be plotted. Default is 1</p>
<p>bool value: if 1, then program will run in simulation mode, if 0 then real data of bpm is used. Can be changed by giving arguments like this: ./main -s 0 for real bpm and ./main -g 1 for simulated bpm. Default is 1</p>
<p>bool value if 1, the audio will be played from this progrma itself. Default is 1. can be changed while running the program by giving arguments like ./main -l 0</p>
<p>If we want to play the audio at any time during the day then nightTime should be set to now. For that we need to set this value to 1. This can be done by passing the argument like: ./main -n 1. Default is 0</p>
<p>int value. The delay it takes the program to reach from the state of maybesleep to sleep. Usually it must be half an our but it can be manipulated for testing purpose like this: ./main -w 60 It this example the program would wait for 30 seconds to go from maybesleep state to sleep state.</p>
<p>This variable is used to get the parameters from the terminal</p>
<p>This variable is used to get the parameters from the terminal</p>
<p>Pulse me runs in a c++ timer It reads the analog data from pulse sensor and calculates BPM. BPM is used for other analysis.</p>
<p>Setting up the JSONCGI communication The callback which is called when fastCGI needs data gets a pointer to the SENSOR callback class which contains the samples. Remember this is just a simple example to have access to some data.</p>
<p>The QApplication will form the windows for the display of raw data read from the sensor. This will block the control and the program will keep on runnig stuck here.</p>
<p>If the graphing window is terminated by the user then the control will get stuck in the while loop which depends on the global variable bool runnig</p>
<p>The timer will stop if the control reaches at pulseMe.stop</p>

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00117">117</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;{</div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;    <span class="keywordtype">int</span> threshold = 77;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;    <span class="keywordtype">bool</span> graph = 1;</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;    <span class="keywordtype">bool</span> simulation = 0;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160; </div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;    <span class="keywordtype">bool</span> local_audio = 1;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160; </div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;    <span class="keywordtype">bool</span> nightTimeNow = 0;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160; </div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="keywordtype">int</span> surelySleptTime = 2;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160; </div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;    <span class="keywordtype">bool</span> flagSurelySleptTime = 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160; </div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    <span class="keywordtype">char</span> key;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160; </div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    <span class="keywordtype">char</span>* value;</div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;    <span class="keywordflow">if</span>(argc &gt; 1){</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;        <span class="comment">//mode = atoi(argv[1]);</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;        <span class="keywordflow">for</span>(<span class="keywordtype">int</span> i = 1; i &lt; argc; i++){</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            <span class="keywordflow">if</span>(argv[i][0] == <span class="charliteral">&#39;-&#39;</span>){</div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;                key = argv[i][1];</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;                value = argv[i + 1];</div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;                <span class="keywordflow">switch</span>(key){</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;t&#39;</span>:</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;                                        threshold = atoi(value);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;g&#39;</span>:</div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                                        graph = atoi(value);</div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;s&#39;</span>:</div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;                                        simulation = atoi(value);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;l&#39;</span>:</div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;                                        local_audio = atoi(value);</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;n&#39;</span>:</div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;                                        nightTimeNow = atoi(value);</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;w&#39;</span>:</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;                                        surelySleptTime = atoi(value);</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;                    flagSurelySleptTime = 1;</div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;                    <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;                                <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>:</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;                    i +=1;</div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                    <a class="code" href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a>();</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                    exit(0);</div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;                                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                                <span class="keywordflow">default</span>:</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                    printf(<span class="stringliteral">&quot;Wrong Parameters passed\n\n&quot;</span>);</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                    <a class="code" href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a>();</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                    exit(0);</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                            }</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160; </div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;            }<span class="keywordflow">else</span>{</div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;                <a class="code" href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a>();</div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                exit(0);</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;            }</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;        }</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;    }</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;    signal(SIGINT, <a class="code" href="main_8cpp.html#a8ee3282bc313e547dbbb8d4f4010db61">signalHandler</a>);</div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;    <a class="code" href="class_sensor_timer.html">SensorTimer</a> pulseMe(threshold, simulation, local_audio);</div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">if</span>(nightTimeNow)</div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;        pulseMe.setNigtTimeToNow();</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;    <span class="comment">//waiting time just after the bpm drops to threshold</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;    <span class="keywordflow">if</span>(flagSurelySleptTime)</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;        pulseMe.setSurelySleptTime(surelySleptTime);</div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160; </div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160; </div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <a class="code" href="class_s_e_n_s_o_rfastcgicallback.html">SENSORfastcgicallback</a> sensorfastcgicallback;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  pulseMe.setCallback(&amp;sensorfastcgicallback);</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160; </div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;  <a class="code" href="class_j_s_o_n_c_g_i_a_d_c_callback.html">JSONCGIADCCallback</a> fastCGIADCCallback(&amp;sensorfastcgicallback);</div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160; </div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160; </div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;    <span class="comment">// starting the fastCGI handler with the callback and the</span></div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;    <span class="comment">// socket for nginx.</span></div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <a class="code" href="class_j_s_o_n_c_g_i_handler.html">JSONCGIHandler</a>* fastCGIHandler = <span class="keyword">new</span> <a class="code" href="class_j_s_o_n_c_g_i_handler.html">JSONCGIHandler</a>(&amp;fastCGIADCCallback, NULL, <span class="stringliteral">&quot;/tmp/sensorsocket&quot;</span>);</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160; </div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;    pulseMe.startms(2);</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    QApplication a(argc, argv);</div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;    <a class="code" href="class_sense_window.html">SenseWindow</a> w;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    <span class="keywordflow">if</span>(graph){</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;        w.showMaximized();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;        a.exec();</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;    }</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160; </div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;    <span class="keywordflow">while</span>(<a class="code" href="main_8cpp.html#a037aed45f792fc3e78387006be43a53e">g_running</a>);</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160; </div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160; </div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;   <span class="comment">//pulseMe.stop();</span></div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;   pulseMe.stopNew();</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160; </div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160; </div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160; </div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;}<span class="comment">//int main(int argc, char *argv[])</span></div>
<div class="ttc" id="aclass_j_s_o_n_c_g_i_a_d_c_callback_html"><div class="ttname"><a href="class_j_s_o_n_c_g_i_a_d_c_callback.html">JSONCGIADCCallback</a></div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00065">main.cpp:65</a></div></div>
<div class="ttc" id="aclass_j_s_o_n_c_g_i_handler_html"><div class="ttname"><a href="class_j_s_o_n_c_g_i_handler.html">JSONCGIHandler</a></div><div class="ttdef"><b>Definition:</b> <a href="json__fastcgi__web__api_8h_source.html#l00025">json_fastcgi_web_api.h:25</a></div></div>
<div class="ttc" id="aclass_s_e_n_s_o_rfastcgicallback_html"><div class="ttname"><a href="class_s_e_n_s_o_rfastcgicallback.html">SENSORfastcgicallback</a></div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00030">main.cpp:30</a></div></div>
<div class="ttc" id="aclass_sense_window_html"><div class="ttname"><a href="class_sense_window.html">SenseWindow</a></div><div class="ttdef"><b>Definition:</b> <a href="_pulse_sensor_8h_source.html#l00531">PulseSensor.h:531</a></div></div>
<div class="ttc" id="aclass_sensor_timer_html"><div class="ttname"><a href="class_sensor_timer.html">SensorTimer</a></div><div class="ttdef"><b>Definition:</b> <a href="_pulse_sensor_8h_source.html#l00031">PulseSensor.h:31</a></div></div>
<div class="ttc" id="amain_8cpp_html_a037aed45f792fc3e78387006be43a53e"><div class="ttname"><a href="main_8cpp.html#a037aed45f792fc3e78387006be43a53e">g_running</a></div><div class="ttdeci">volatile int g_running</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00098">main.cpp:98</a></div></div>
<div class="ttc" id="amain_8cpp_html_a8ee3282bc313e547dbbb8d4f4010db61"><div class="ttname"><a href="main_8cpp.html#a8ee3282bc313e547dbbb8d4f4010db61">signalHandler</a></div><div class="ttdeci">void signalHandler(int signum)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00100">main.cpp:100</a></div></div>
<div class="ttc" id="amain_8cpp_html_ae8605e2b78cd4a81b6c6b5c30cb7366a"><div class="ttname"><a href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a">usage</a></div><div class="ttdeci">void usage(void)</div><div class="ttdef"><b>Definition:</b> <a href="main_8cpp_source.html#l00105">main.cpp:105</a></div></div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp_source.html#l00098">g_running</a>, <a class="el" href="_pulse_sensor_8h_source.html#l00314">SensorTimer::setCallback()</a>, <a class="el" href="_pulse_sensor_8h_source.html#l00247">SensorTimer::setNigtTimeToNow()</a>, <a class="el" href="_pulse_sensor_8h_source.html#l00244">SensorTimer::setSurelySleptTime()</a>, <a class="el" href="main_8cpp_source.html#l00100">signalHandler()</a>, <a class="el" href="_cpp_timer_8cpp_source.html#l00055">CppTimer::startms()</a>, <a class="el" href="_pulse_sensor_8h_source.html#l00255">SensorTimer::stopNew()</a>, and <a class="el" href="main_8cpp_source.html#l00105">usage()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph.png" border="0" usemap="#amain_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" alt=""/></div>
<map name="amain_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph" id="amain_8cpp_a0ddf1224851353fc92bfbff6f499fa97_cgraph">
<area shape="rect" title=" " alt="" coords="5,173,56,200"/>
<area shape="rect" href="class_sensor_timer.html#a2b87e348b476be96d88ee70be98bef11" title=" " alt="" coords="127,5,300,32"/>
<area shape="rect" href="class_sensor_timer.html#a571f7dcc621738e57607586cea71d302" title=" " alt="" coords="126,57,301,98"/>
<area shape="rect" href="class_sensor_timer.html#ad8d148ba672bccb72ca45fea9b98fb38" title=" " alt="" coords="104,123,323,149"/>
<area shape="rect" href="main_8cpp.html#a8ee3282bc313e547dbbb8d4f4010db61" title=" " alt="" coords="163,173,264,200"/>
<area shape="rect" href="class_cpp_timer.html#a1fec3e463138ab01f640aec9aafc14d0" title=" " alt="" coords="148,224,279,251"/>
<area shape="rect" href="class_sensor_timer.html#ab27fde0c17025181e3008d3246077bbc" title=" " alt="" coords="135,275,291,301"/>
<area shape="rect" href="main_8cpp.html#ae8605e2b78cd4a81b6c6b5c30cb7366a" title=" " alt="" coords="185,325,242,352"/>
<area shape="rect" href="class_cpp_timer.html#a4bb95ddee98a536d0818b8f6096bf7e7" title=" " alt="" coords="371,275,483,301"/>
</map>
</div>

</div>
</div>
<a id="a8ee3282bc313e547dbbb8d4f4010db61"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ee3282bc313e547dbbb8d4f4010db61">&#9670;&nbsp;</a></span>signalHandler()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void signalHandler </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>signum</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00100">100</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;                              {</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;    <a class="code" href="main_8cpp.html#a037aed45f792fc3e78387006be43a53e">g_running</a> = 0;</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    printf(<span class="stringliteral">&quot;\n\n\nProgram Terminated\n\n\n&quot;</span>);</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">References <a class="el" href="main_8cpp_source.html#l00098">g_running</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp_source.html#l00117">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_a8ee3282bc313e547dbbb8d4f4010db61_icgraph.png" border="0" usemap="#amain_8cpp_a8ee3282bc313e547dbbb8d4f4010db61_icgraph" alt=""/></div>
<map name="amain_8cpp_a8ee3282bc313e547dbbb8d4f4010db61_icgraph" id="amain_8cpp_a8ee3282bc313e547dbbb8d4f4010db61_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,205,32"/>
<area shape="rect" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<a id="ae8605e2b78cd4a81b6c6b5c30cb7366a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8605e2b78cd4a81b6c6b5c30cb7366a">&#9670;&nbsp;</a></span>usage()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void usage </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00105">105</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>
<div class="fragment"><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                {</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;    printf(<span class="stringliteral">&quot;\nUsage:\n&quot;</span></div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                 <span class="stringliteral">&quot;./main [-h] for usage\n&quot;</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                 <span class="stringliteral">&quot;./main [-t &lt;int&gt;] to put bpm threshold\n&quot;</span></div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                 <span class="stringliteral">&quot;./main [-g &lt;bool&gt;] 1 to plot in qtplot. Default: 1\n&quot;</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                 <span class="stringliteral">&quot;./main [-l &lt;bool&gt;] 1 to play audio locally. Default: 1\n&quot;</span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                 <span class="stringliteral">&quot;./main [-n &lt;bool&gt;] 1 to set night time to now. Default: 0\n&quot;</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                 <span class="stringliteral">&quot;./main [-w &lt;int&gt; ]set waiting time to confirm sleep.\n&quot;</span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                 <span class="stringliteral">&quot;./main [-s &lt;bool&gt;] 1 for simulated bpm. Default: 0\n&quot;</span>);</div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;}</div>
</div><!-- fragment -->
<p class="reference">Referenced by <a class="el" href="main_8cpp_source.html#l00117">main()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="main_8cpp_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph.png" border="0" usemap="#amain_8cpp_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph" alt=""/></div>
<map name="amain_8cpp_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph" id="amain_8cpp_ae8605e2b78cd4a81b6c6b5c30cb7366a_icgraph">
<area shape="rect" title=" " alt="" coords="104,5,161,32"/>
<area shape="rect" href="main_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97" title=" " alt="" coords="5,5,56,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a037aed45f792fc3e78387006be43a53e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a037aed45f792fc3e78387006be43a53e">&#9670;&nbsp;</a></span>g_running</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">volatile int g_running = 1</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="main_8cpp_source.html#l00098">98</a> of file <a class="el" href="main_8cpp_source.html">main.cpp</a>.</p>

<p class="reference">Referenced by <a class="el" href="main_8cpp_source.html#l00117">main()</a>, and <a class="el" href="main_8cpp_source.html#l00100">signalHandler()</a>.</p>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="main_8cpp.html">main.cpp</a></li>
    <li class="footer">Generated on Mon Apr 19 2021 23:13:09 for DreamHacker by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1 </li>
  </ul>
</div>
</body>
</html>
